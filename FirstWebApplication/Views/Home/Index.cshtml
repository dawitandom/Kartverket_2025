@*
    Forside for Kartverket Obstacle Reporting System.
    Viser forskjellig innhold basert på om bruker er innlogget og hvilken rolle de har:
    - Ikke innlogget: Viser innloggingskort
    - Pilot (User): Viser "Create New Report" og "My Reports" knapper
    - Admin: Viser "Report Requests" og "Reviewed Reports" knapper
*@

@{
    ViewData["Title"] = "Home";
}

@* Hero-seksjon med grønn gradient bakgrunn *@
<div class="hero-section">
    <div class="container">
        <h1>Obstacle Reporting System</h1>
        <p>Report and manage aviation obstacles - Kartverket</p>
    </div>
</div>

<div class="container">
    @* Sjekker om bruker er innlogget ved å sjekke User.Identity.IsAuthenticated *@
    @if (User.Identity?.IsAuthenticated == true)
    {
        @* Velkomstmelding med brukerens navn (fra Claims) *@
        <div class="alert alert-kartverket mb-5">
            <h5 class="mb-0">✓ Welcome back, @User.Identity.Name!</h5>
        </div>
        
        @* Viser pilot-spesifikke knapper hvis rollen er "User" *@
        @if (User.IsInRole("User"))
        {
            <div class="row g-4">
                @* Kort for å opprette ny rapport *@
                <div class="col-md-6">
                    <div class="card text-center h-100">
                        <div class="card-body d-flex flex-column justify-content-center p-5">
                            @* Stort ikon (emoji) *@
                            <div style="font-size: 4rem; color: var(--kartverket-green); margin-bottom: 1.5rem;">📝</div>
                            <h3 class="card-title mb-3 card-title-kartverket">Create New Report</h3>
                            <p class="card-text mb-4" style="color: #666;">Submit a new obstacle report for review</p>
                            @* asp-controller og asp-action genererer URL til Report/Scheme *@
                            <a asp-controller="Report" asp-action="Scheme" class="btn btn-kartverket-primary btn-lg">
                                Get Started
                            </a>
                        </div>
                    </div>
                </div>
                
                @* Kort for å se egne rapporter *@
                <div class="col-md-6">
                    <div class="card text-center h-100">
                        <div class="card-body d-flex flex-column justify-content-center p-5">
                            <div style="font-size: 4rem; color: var(--kartverket-light-green); margin-bottom: 1.5rem;">📋</div>
                            <h3 class="card-title mb-3 card-title-kartverket">My Reports</h3>
                            <p class="card-text mb-4" style="color: #666;">View and track your submitted reports</p>
                            <a asp-controller="Report" asp-action="MyReports" class="btn btn-kartverket-secondary btn-lg">
                                View Reports
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        }
        
        @* Viser admin-spesifikke knapper hvis rollen er "Admin" *@
        @if (User.IsInRole("Admin"))
        {
            <div class="row g-4">
                @* Kort for pending rapporter *@
                <div class="col-md-6">
                    <div class="card text-center h-100">
                        <div class="card-body d-flex flex-column justify-content-center p-5">
                            <div style="font-size: 4rem; color: var(--kartverket-green); margin-bottom: 1.5rem;">⏳</div>
                            <h3 class="card-title mb-3 card-title-kartverket">Report Requests</h3>
                            <p class="card-text mb-4" style="color: #666;">Review and approve pending reports</p>
                            <a asp-controller="Report" asp-action="PendingReports" class="btn btn-kartverket-primary btn-lg">
                                View Requests
                            </a>
                        </div>
                    </div>
                </div>
                
                @* Kort for reviewed rapporter *@
                <div class="col-md-6">
                    <div class="card text-center h-100">
                        <div class="card-body d-flex flex-column justify-content-center p-5">
                            <div style="font-size: 4rem; color: var(--kartverket-light-green); margin-bottom: 1.5rem;">✅</div>
                            <h3 class="card-title mb-3 card-title-kartverket">Reviewed Reports</h3>
                            <p class="card-text mb-4" style="color: #666;">Browse approved and rejected reports</p>
                            <a asp-controller="Report" asp-action="ReviewedReports" class="btn btn-kartverket-secondary btn-lg">
                                View History
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        }
    }
    else
    {
        @* Vises hvis bruker IKKE er innlogget *@
        <div class="row justify-content-center">
            <div class="col-lg-6">
                <div class="card shadow-lg">
                    <div class="card-header-kartverket text-center">
                        <h3 class="mb-0">Welcome to Kartverket</h3>
                    </div>
                    <div class="card-body p-5 text-center">
                        <div style="font-size: 5rem; color: var(--kartverket-green); margin-bottom: 2rem;">🗺️</div>
                        <h4 class="mb-3 card-title-kartverket">Obstacle Reporting System</h4>
                        <p class="mb-4" style="color: #666; font-size: 1.1rem;">
                            Please log in to report obstacles or review reports
                        </p>
                        @* Knapp som sender bruker til innloggingssiden *@
                        <a asp-controller="Account" asp-action="Login" class="btn btn-kartverket-primary btn-lg">
                            Log In to Continue
                        </a>
                    </div>
                </div>
            </div>
        </div>
    }
</div>